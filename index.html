---
layout: default
title: Home
---

<section class="hero">
    <div class="hero-content">
        <h1>The IoT Lab</h1>
        <p>Exploring the frontier of smart home security, automation, and the connected future. We break things so you don't have to.</p>
        <div class="hero-actions">
            <a href="{{ '/blog/' | relative_url }}" class="btn">Explore Experiments</a>
            <a href="{{ '/about.html' | relative_url }}" class="btn btn-outline-hero">Learn More</a>
        </div>
    </div>
</section>

<section class="lab-status">
    <div class="status-grid">
        <div class="status-card" id="card-system">
            <span class="status-label">Lab System</span>
            <span class="status-value">Online</span>
            <span class="status-indicator online"></span>
        </div>
        <div class="status-card" id="card-experiments">
            <span class="status-label">Total Experiments</span>
            <span class="status-value">{{ site.posts | size }}</span>
        </div>
        <div class="status-card" id="card-network">
            <span class="status-label">Network Load</span>
            <span class="status-value"><span id="network-val">12</span>%</span>
            <div class="status-bar"><div class="bar-fill" style="width: 12%"></div></div>
        </div>
        <div class="status-card" id="card-cpu">
            <span class="status-label">CPU Usage</span>
            <span class="status-value"><span id="cpu-val">4</span>%</span>
            <div class="status-bar"><div class="bar-fill accent" style="width: 4%"></div></div>
        </div>
    </div>
</section>

<section class="blog-section">
    <div class="section-header">
        <h2>Recent Experiments</h2>
        <p>Latest write-ups from the lab bench.</p>
    </div>
    
    <div class="posts-grid">
        {% for post in site.posts limit:3 %}
        <article class="post-card" style="animation-delay: {{ forloop.index | times: 0.1 }}s">
            <div class="post-meta">
                <span class="post-date">{{ post.date | date: "%B %d, %Y" }}</span>
                {% if post.tags.size > 0 %}
                <span class="post-tag">{{ post.tags[0] }}</span>
                {% endif %}
            </div>
            <h3><a href="{{ post.url | relative_url }}">{{ post.title }}</a></h3>
            <p class="post-excerpt">
                {% if post.excerpt %}
                    {{ post.excerpt | strip_html | truncatewords: 20 }}
                {% else %}
                    {{ post.content | strip_html | truncatewords: 20 }}
                {% endif %}
            </p>
            <a href="{{ post.url | relative_url }}" class="read-more">Read Experiment âžœ</a>
        </article>
        {% endfor %}
    </div>

    <div class="text-center">
        <a href="{{ '/blog/' | relative_url }}" class="btn btn-outline">View All Posts</a>
    </div>
</section>

<script>
    function updateStats() {
        const netVal = document.getElementById('network-val');
        const cpuVal = document.getElementById('cpu-val');
        
        if (netVal && cpuVal) {
            // Randomize Network Load (between 8 and 24)
            const newNet = Math.floor(Math.random() * (24 - 8 + 1)) + 8;
            animateValue(netVal, parseInt(netVal.innerText), newNet, 1000);
            netVal.closest('.status-card').querySelector('.bar-fill').style.width = newNet + '%';
            
            // Randomize CPU Load (between 2 and 12)
            const newCpu = Math.floor(Math.random() * (12 - 2 + 1)) + 2;
            animateValue(cpuVal, parseInt(cpuVal.innerText), newCpu, 1000);
            cpuVal.closest('.status-card').querySelector('.bar-fill.accent').style.width = newCpu + '%';
        }
    }

    function animateValue(obj, start, end, duration) {
        if (isNaN(start)) start = end;
        let startTimestamp = null;
        const step = (timestamp) => {
            if (!startTimestamp) startTimestamp = timestamp;
            const progress = Math.min((timestamp - startTimestamp) / duration, 1);
            obj.innerHTML = Math.floor(progress * (end - start) + start);
            if (progress < 1) {
                window.requestAnimationFrame(step);
            }
        };
        window.requestAnimationFrame(step);
    }

    // Update every 5 seconds
    setInterval(updateStats, 5000);
    
    // Initial call
    setTimeout(updateStats, 500);
</script>
